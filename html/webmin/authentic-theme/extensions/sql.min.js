/*!
 * Authentic Theme (https://github.com/authentic-theme/authentic-theme)
 * Copyright Ilia Rostovtsev <programming@rostovtsev.io>
 * Licensed under MIT (https://github.com/authentic-theme/authentic-theme/blob/master/LICENSE)
 */
function __sql_____undel(){var e=$("body"),t="change.sql keydown.sql click.sql dblclick.sql";e.off(t),$("body *").undelegate(t).unbind(t).off(t),f__ex__mysql_runner_active=0}function db_check_selected(){if("undefined"!=typeof f__ex__mysql_runner_active&&f__ex__mysql_runner_active){var e=$('.table.table-striped.table-hover.table-condensed input[type="checkbox"]:checked, form div.icons-container.highlighted, form div.small-icons-container.highlighted, form div.xsmall-icons-container.highlighted').length;0===e?$("button#edit, button#delete, button#deleteClone, input#delete").prop("disabled",!0):$("button#edit, button#delete, button#deleteClone, input#delete").prop("disabled",!1);var t=$("button#edit span"),a=$("button#delete span"),l=$("button#deleteClone span");v___location_path==v___location_prefix+"/mysql/edit_dbase.cgi"||v___location_path==v___location_prefix+"/postgresql/edit_dbase.cgi"?e>1?l.text(theme_language("theme_xhred_database_objects_selected_delete")):l.text(theme_language("theme_xhred_database_object_selected_delete")):v___location_path==v___location_prefix+"/mysql/edit_table.cgi"||v___location_path==v___location_prefix+"/postgresql/edit_table.cgi"?e>1?l.text(theme_language("theme_xhred_database_delete_selected_fields")):l.text(theme_language("theme_xhred_database_delete_selected_field")):v___location_path==v___location_prefix+"/mysql/"||v___location_path==v___location_prefix+"/postgresql/"||v___location_path==v___location_prefix+"/mysql/index.cgi"||v___location_path==v___location_prefix+"/postgresql/index.cgi"?e>1?l.text(theme_language("theme_xhred_database_dbs_selected_drop")):l.text(theme_language("theme_xhred_database_db_selected_drop")):"list_users.cgi"!=v___location_file&&"list_dbs.cgi"!=v___location_file&&"list_tprivs.cgi"!=v___location_file&&"list_cprivs.cgi"!=v___location_file&&"list_grants.cgi"!=v___location_file&&"list_hosts.cgi"!=v___location_file&&(e>1?(t.text(theme_language("theme_xhred_database_edit_selected_rows")),a.text(theme_language("theme_xhred_database_delete_selected_rows"))):(t.text(theme_language("theme_xhred_database_edit_selected_row")),a.text(theme_language("theme_xhred_database_delete_selected_row"))))}}function proc_sql_table(e){"undefined"!=typeof f__ex__mysql_runner_active&&f__ex__mysql_runner_active&&(v___location_path!=v___location_prefix+"/mysql/view_table.cgi"&&v___location_path!=v___location_prefix+"/postgresql/view_table.cgi"||(e.parent("tr").addClass("selectable"),e.addClass("selectable")),!e.find("table").length&&e.attr("title",$.trim(e.text())))}function f__ex__mysql_runner(){f__ex__mysql_runner_active=1,v___location_path!=v___location_prefix+"/mysql/view_table.cgi"&&v___location_path!=v___location_prefix+"/postgresql/view_table.cgi"||$.each($('input[type="submit"].btn.btn-default'),function(e,t){$(this).parent().is(".end_submits")||($(this).before('<button type="button" class="ui_form_end_submit '+$(this).attr("class")+'">'+$(this).val()+"</button>"),$(this).addClass("hidden"))});var e=$("body");e.undelegate('input[type="checkbox"]',"change.sql"),$(".table.table-striped.table-hover.table-condensed").on("change.sql",'input[type="checkbox"]',function(e){db_check_selected()});e.undelegate(".select_all, .select_invert","click.sql"),e.on("click.sql",".select_all, .select_invert",function(e){db_check_selected()});if(e.undelegate('button[name="cancel"]',"click.sql"),e.on("click.sql",'button[name="cancel"]',function(e){set_onbeforeunload_status(0,0)}),$isResizeable=!1,v___location_file&&"list_users.cgi"!=v___location_file&&"list_dbs.cgi"!=v___location_file&&"list_tprivs.cgi"!=v___location_file&&"list_cprivs.cgi"!=v___location_file||(db_check_selected(),table_data_init($(".table.table-striped.table-hover.table-condensed")),page.render.content.filter.init(),"list_dbs.cgi"!=v___location_file&&"list_tprivs.cgi"!=v___location_file&&"list_cprivs.cgi"!=v___location_file||$(".fa-user-times").addClass("fa-times-circle").removeClass("fa-user-times")),v___location_path!=v___location_prefix+"/mysql/drop_dbases.cgi"&&v___location_path!=v___location_prefix+"/postgresql/drop_dbases.cgi"&&v___location_path!=v___location_prefix+"/mysql/drop_tables.cgi"&&v___location_path!=v___location_prefix+"/postgresql/drop_tables.cgi"||setTimeout(function(){$(".btn.btn-default").removeClass("heighter-28 btn-default").addClass("heighter-34 btn-danger")},10),v___location_path!=v___location_prefix+"/mysql/"&&v___location_path!=v___location_prefix+"/postgresql/"&&v___location_path!=v___location_prefix+"/mysql/index.cgi"&&v___location_path!=v___location_prefix+"/postgresql/index.cgi"||(setTimeout(function(){$('.panel-body .table-hardcoded tr td[align="right"]:last-child').find("a").addClass("btn btn-tiny btn-danger").prepend('<i class="fa fa-fw fa-filter-clear"></i>&nbsp;&nbsp;'),$(".ui_select.heighter-34").length&&$('a[href="newdb_form.cgi"]').addClass("btn btn-success").text($('a[href="newdb_form.cgi"]').text().replace(".","")).prepend('<i class="fa fa-fw fa-plus"></i>&nbsp;&nbsp;')},10),e.undelegate("#newClone, #deleteClone","click.sql"),e.on("click.sql","#newClone, #deleteClone",function(e){e.preventDefault(),$("#"+$(this).attr("id").replace("Clone","")).trigger("click")})),config_portable_module_xsql_fit_content_screen_height||e.addClass("long-table-scroll-maxHeight"),v___location_path==v___location_prefix+"/mysql/edit_dbase.cgi"||v___location_path==v___location_prefix+"/mysql/edit_table.cgi"||v___location_path==v___location_prefix+"/mysql/view_table.cgi"||v___location_path==v___location_prefix+"/postgresql/edit_dbase.cgi"||v___location_path==v___location_prefix+"/postgresql/edit_table.cgi"||v___location_path==v___location_prefix+"/postgresql/view_table.cgi"){if(setTimeout(function(){$('.panel-body .table-hardcoded tr td[align="right"]:last-child').find("a").addClass("btn btn-tiny btn-danger").prepend('<i class="fa fa-fw fa-filter-clear"></i>&nbsp;&nbsp;')},10),v___location_path==v___location_prefix+"/mysql/view_table.cgi"||v___location_path==v___location_prefix+"/postgresql/view_table.cgi"){$("#delete").remove(),$("#edit").length&&$("#new").addClass("hidden"),$("#edit").replaceWith('  \t\t\t\t<div class="btn-group">  \t\t\t\t\t<button class="btn btn-default" type="submit" name="edit" id="edit" disabled><i class="fa fa-fw fa-i-cursor">&nbsp;&nbsp;</i><span>'+theme_language("theme_xhred_database_edit_selected_row")+'</span></button>  \t\t\t\t\t<button class="btn btn-success" type="submit" name="newClone" id="newClone"><i class="fa fa-fw fa-plus-circle">&nbsp;&nbsp;</i><span>'+theme_language("theme_xhred_database_add_new_row")+'</span></button>  \t\t\t\t\t<button class="btn btn-warning" type="submit" name="delete" id="delete" disabled><i class="fa fa-fw fa-trash">&nbsp;&nbsp;</i><span>'+theme_language("theme_xhred_database_delete_selected_row")+"</span></button>  \t\t\t\t</div>  \t\t\t");var t="#newClone, #deleteClone";e.undelegate(t,"click.sql"),e.on("click.sql",t,function(e){var t=$(quirks.active_element()).parents("form");$("<input>").attr({type:"hidden",name:$(quirks.active_element()).attr("name").replace("Clone",""),value:$.trim(quirks.active_element().innerText)}).appendTo(t),$("#"+$(this).attr("id").replace("Clone","")).trigger("click")})}$(".table.table-striped.table-hover.table-condensed").css({width:"99.7%"}).wrap('<div class="long-table-wrapper"><div class="long-table-scroll"></div></div>');var t='td > label[for^="row_"], td.td_tag.selectable';e.undelegate(t,"click.sql"),e.on("click.sql",t,function(e){$(this).find("input, textarea").length||(e.preventDefault(),e.stopPropagation(),$(this).selectText())}),e.undelegate(t,"dblclick.sql"),e.on("dblclick.sql",t,function(e){e.preventDefault(),e.stopPropagation()}),e.undelegate(".long-table-wrapper div.thead","click.sql"),e.on("click.sql",".long-table-wrapper div.thead",function(e){$("#savenew").length||($(this).find("i").hasClass("fa-plus-square")?($(this).find("i").removeClass("fa-plus-square").addClass("fa-minus-square"),$(this).find("i").parent().next(".long-table-scroll").find(".table-hardcoded").removeClass("hidden")):($(this).find("i").addClass("fa-plus-square").removeClass("fa-minus-square"),$(this).find("i").parent().next(".long-table-scroll").find(".table-hardcoded").addClass("hidden")),$(window).trigger("resize"))}),$.each($(".table.table-striped.table-hover.table-condensed").find("thead th, tbody td:last-child"),function(e,t){$(this).is("th")&&$(this).html('<em class="text-nowrap th-server-sort">'+$(this).html()+"</em>"),$(this).is(":last-child")&&!$(this).parents(".table-hardcoded").length&&$(this).css("border-right","1px solid #"+(v___theme_night_mode_enabled?"2f3238":"eee"))}).promise().done(function(){$.each($(".table.table-striped.table-hover.table-condensed").find("tbody tr td"),function(e,t){proc_sql_table($(this))}).promise().done(function(){var t='<i class="fa fa-fw fa-floppy-o">&nbsp;&nbsp;</i>',a='<i class="fa fa-fw fa-check-circle-o">&nbsp;&nbsp;</i>',l='<span class="cspinner_container" style=" width: 18px; height: 14px; display: inline-block;"><span class="cspinner" style="margin-top: 1px; margin-left: -11px;"><span class="cspinner-icon white small"></span></span></span>';if(v___location_path==v___location_prefix+"/mysql/view_table.cgi"||v___location_path==v___location_prefix+"/postgresql/view_table.cgi")var n=parseInt($(".ui_form > .long-table-wrapper .long-table-scroll").width()),i=parseInt($(".ui_form > .long-table-wrapper .long-table-scroll > table").width()),s=i>n;if(s||e.addClass("__non_res__"),(v___location_path==v___location_prefix+"/mysql/view_table.cgi"||v___location_path==v___location_prefix+"/postgresql/view_table.cgi")&&$("#save, #savenew").length&&$("#cancel").length){$("#save").length&&$("#cancel").length&&($("#cancel").remove(),$("#save").replaceWith('\t\t\t\t\t\t\t\t<div class="btn-group">\t\t\t\t\t\t\t\t\t<button class="btn btn-success" type="submit" name="save" id="save">'+t+theme_language("theme_xhred_global_update")+'</button>\t\t\t\t\t\t\t\t\t<button class="btn btn-default" type="submit" name="save-close" id="save-close">'+a+theme_language("theme_xhred_global_update_and_close")+'</button>\t\t\t\t\t\t\t\t\t<button class="btn btn-default" type="submit" name="cancel" id="cancel"><i class="fa fa-fw fa-undo">&nbsp;&nbsp;</i>'+theme_language("theme_xhred_global_back")+"</button>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t")),$("#savenew").length&&$("#cancel").length&&($("#cancel").remove(),$("#savenew").replaceWith('\t\t\t\t\t\t\t\t<div class="btn-group">\t\t\t\t\t\t\t\t\t<button class="btn btn-success" type="submit" name="savenew" id="savenew">'+t+theme_language("theme_xhred_global_save")+'</button>\t\t\t\t\t\t\t\t\t<button class="btn btn-default" type="submit" name="savenew-close" id="savenew-close">'+a+theme_language("theme_xhred_global_save_and_close")+'</button>\t\t\t\t\t\t\t\t\t<button class="btn btn-default" type="submit" name="cancel" id="cancel"><i class="fa fa-fw fa-undo">&nbsp;&nbsp;</i>'+theme_language("theme_xhred_global_cancel")+"</button>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t"));var o=$("td.td_tag .table-hardcoded"),_=parseInt($(".ui_form > .long-table-wrapper .long-table-scroll").width()),r=$(".table.table-striped.table-hover.table-condensed").find("thead th").filter(function(e){return $(this).position().left+$(this).width()<_}).length+1,d=($(".table.table-striped.table-hover.table-condensed").find("thead th").length,0);navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(25,13,d=20):(19,10,d=15);var c=1!=get_server_data("navigation-collapsed")&&v___available_navigation?parseInt(settings_leftmenu_width)+15:15,p=0==get_server_data("slider-fixed")?15:315,b=100-pxTOvw(c)-pxTOvw(p);o.find('input[type="text"], textarea').addClass("input-sm"),o.wrap('<div class="long-table-wrapper"><div class="long-table-scroll container-resizeable-scroll" style="max-height: 28vh; width: '+(b-.9)+"vw; max-width: "+(b-.9)+'vw;"></div></div>').addClass("container-resizeable-table").css({width:"99%","margin-top":"-1px"}).parent().parent().parent("td").removeClass("selectable").addClass("col-no-styling container-resizeable-col").attr({colspan:r,style:"padding: 0 !important;"}).find(".long-table-wrapper").attr({style:"margin: 0 !important"}).find(".table-hardcoded tr.thead").attr({style:"border: 0 !important"}).addClass("hidden").next("tr").find("td:first-child").css({width:"20%","text-align":"left","padding-left":"10%"}).parent("tr").find("td:last-child").css({width:"80%","text-align":"left","padding-left":"10%"}),setTimeout(function(){$.each(o.parent(".long-table-scroll").parent(".long-table-wrapper"),function(){var e=$(this).find(".table-hardcoded").find("tbody tr:nth-child(2) td:last-child"),e=e.find('input[type="text"]').val()?e.find('input[type="text"]').val():e.text();$(this).prepend('\t\t\t\t\t \t\t\t\t  <div class="thead container-resizeable-head" style="width: '+b+"vw; max-width: "+b+'vw;">\t\t\t\t\t \t\t\t\t  \t<i class="fa fa-fw fa-minus-square text-light pull-right db_editor_collapse'+($("#savenew").length?" invisible":"")+'" style="cursor: default; margin-top: 5px; position: relative; z-index: 999999; margin-right: '+d+'px; margin-bottom: -5px;"></i>\t\t\t\t\t \t\t\t\t  \t<span class="col-xs-2 text-left pull-left" style="padding-top: 1px; padding-left: 7px;"><em style="font-weight: 500">'+($("#savenew").length?"":e)+'</em></span>\t\t\t\t\t \t\t\t\t  \t<span class="col-xs-10 text-left pull-left" style="padding-top: 0; padding-left: 4%; font-size: 14px; font-weight: 500; font-style: italic;">'+($("#savenew").length?theme_language("theme_xhred_database_adding_new_row_data"):"")+"</span>\t\t\t\t\t \t\t\t\t  </div>\t\t\t\t\t\t\t\t")}),$(".col-no-styling").parent("tr").addClass("row-no-styling"),$.each($(".table.table-striped.table-hover.table-condensed > thead > tr, .table.table-striped.table-hover.table-condensed > tbody > tr:not(.row-no-styling)"),function(){$(this).find("input, textarea").length||$(this).addClass("opacity-0_5")});var t=$(".container-resizeable-head").length>1?"s":"",a=$("#savenew").length?theme_language("theme_xhred_database_adding_new_row"):theme_language("theme_xhred_database_editing_row"+t);if($(".panel-body > center").remove(),$(".panel-body").prepend('<center><span class="h4">'+a+"</span></center>"),hSB=$(".ui_form > .long-table-wrapper .long-table-scroll").hasScrollBar(),hSB)if($("#savenew").length)$(".long-table-scroll").scrollTop($(".long-table-scroll")[0].scrollHeight);else{var l=$(".container-resizeable-head:last");l&&l.length&&l.scrollIntoView({duration:200,direction:"vertical",complete:function(){}})}var n=".container-resizeable-table input, .container-resizeable-table textarea";e.undelegate(n,"keydown.sql"),e.on("keydown.sql",n,function(){$("button.btn-success").removeClass("btn-success").addClass("btn-warning").attr("data-form-onbeforeunload","1").attr("data-form-onbeforeunload-tabledata","1"),set_onbeforeunload_status(1,0)})},10),$(window).resize(function(){var t=0,a=0,l=0,n=0,i=0;setTimeout(function(){navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(i=25,n=18):(i=19,n=5),l=$(".ui_form > .long-table-wrapper .long-table-scroll").hasScrollBar(),t=parseInt($(".ui_form > .long-table-wrapper .long-table-scroll").width()),a=$(".table.table-striped.table-hover.table-condensed").find("thead th").filter(function(e){return $(this).position().left+$(this).width()<t}).length+1},2),setTimeout(function(){e.find(".container-resizeable-col").attr("colspan",a),e.find(".container-resizeable-scroll").width(t-i+6+parseInt(l?0:n)),e.find(".container-resizeable-head").width(t-i+12+parseInt(l?0:n))},3)}),setTimeout(function(){$(window).trigger("resize"),$('form[action="view_table.cgi"]').nextAll(":not(script)").remove()},11);var h="#save, #save-close, #savenew, #savenew-close";e.undelegate(h,"click.sql"),e.on("click.sql",h,function(e){e.preventDefault();var n=$(this),i=n.attr("id"),s="save-close"==i?"save":"savenew-close"==i?"savenew":i;"save"==i||"savenew"==i?$("button").find(".fa.fa-floppy-o").replaceWith(l):"save-close"!=i&&"savenew-close"!=i||$("button").find(".fa.fa-check-circle-o").replaceWith('<span class="cspinner_container" style=" width: 18px; height: 14px; display: inline-block;"><span class="cspinner" style="margin-top: 1px; margin-left: -11px;"><span class="cspinner-icon dark small"></span></span></span>'),setTimeout(function(){$.ajax({type:"POST",url:v___location_path+"?xhr&"+s+"=1&stripped=1",data:n.parents("form").serialize(),dataType:"text",success:function(e){if(Test.strContains(e,v___page_signin_form))return void(v___available_session=0);if($("button").find(".cspinner_container").replaceWith("save"==i||"savenew"==i?t:a),$(e).find(".ui_form").length){if($("button.btn-warning").removeClass("btn-warning").addClass("btn-success").attr("data-form-onbeforeunload",0),set_onbeforeunload_status(0,0),"save"==i||"save-close"==i){$(".container-resizeable-head").length;"save-close"==i&&$("#cancel").trigger("click")}if("savenew"==i||"savenew-close"==i){"savenew-close"==i&&$("#cancel").trigger("click");var l="";$.each($("tr.row-no-styling"),function(){var e=$(this);l+='<tr class="tr_tag selectable opacity-0_5">',$.each(e.find("table tbody tr:not(.thead) td:last-child"),function(){var e=$(this).find('input[type="text"], textarea').val();l+="<td>"+(e?e:"")+"</td>"}),l+="</tr>"}).promise().done(function(){$(".long-table-wrapper > .long-table-scroll > .table.table-striped.table-hover.table-condensed tbody tr.row-no-styling").before(l),$.each($(".table.table-striped.table-hover.table-condensed").find("thead th, tbody td:last-child"),function(e,t){$(this).is("th")&&$(this).html("<em>"+$(this).text()+"</em>"),$(this).is(":last-child")&&!$(this).parents(".table-hardcoded").length&&$(this).css("border-right","1px solid #"+(v___theme_night_mode_enabled?"2f3238":"eee"))})})}}else theme_messenger('<i class="fa fa-fw fa-exclamation-triangle"></i>'+$(e).find(".panel-body h3").find("tt:last-child").html(),10,"error")},error:function(e){}})},100)})}else"view_table.cgi"!=v___location_file&&table_data_init($(".table.table-striped.table-hover.table-condensed"),!1,s),$(".table.table-striped.table-hover.table-condensed").prev(".dataTables_filter").attr("style","margin-top: -25px !important; margin-right: 1px;"),$(".dataTable.no-footer").find("thead th:first-child").addClass("pointer-events-none opacity-0"),$.each($(".dataTables_filter"),function(){var e=$(this).parents(".long-table-wrapper"),t=e.find(".table.table-striped.table-hover.table-condensed"),a=-(1/0);t.find("tr").each(function(e,t){a=Math.max(a,parseFloat(e))}),a<10?t.parents(".dataTables_wrapper").find(".dataTables_filter").remove():$(this).detach().insertBefore(e).css({float:"right","margin-top":"-30px"})}).promise().done(function(){page.render.content.filter.init()}),v___location_path!=v___location_prefix+"/mysql/edit_dbase.cgi"&&v___location_path!=v___location_prefix+"/postgresql/edit_dbase.cgi"||($('.table-hardcoded[width="100%"]').nextAll(".select_all, .select_invert").attr("style","margin-top: 4px !important"),$("#delete").addClass("hidden").after('<button class="btn btn-danger" type="submit" name="deleteClone" id="deleteClone" disabled><i class="fa fa-fw fa-trash-o">&nbsp;&nbsp;</i><span>'+theme_language("theme_xhred_database_object_selected_delete")+"</span></button>"),$("#fields").addClass("heighter-34"),$(".ui_form_end_submit").parent().find(".ui_form_end_submit:not(:first), .ui_form_end_submit:not(:first) + input").wrapAll('<div class="btn-group end_submits"></div>'),$(".btn-group.end_submits .btn").addClass("heighter-34 heighter-34-force")),v___location_path!=v___location_prefix+"/mysql/edit_table.cgi"&&v___location_path!=v___location_prefix+"/postgresql/edit_table.cgi"||$("#delete").addClass("hidden").after('<button class="btn btn-warning" type="submit" name="deleteClone" id="deleteClone" data-clone-allowed="1" disabled><i class="fa fa-fw fa-trash-o">&nbsp;&nbsp;</i><span>'+theme_language("theme_xhred_database_delete_selected_field")+"</span></button>"),$('button#delete, button#deleteClone[data-clone-allowed="1"]').confirmation({},function(e){if(e.preventDefault(),e.stopPropagation(),"edit_table.cgi"==v___location_file||"view_table.cgi"==v___location_file){var t=$(this);setTimeout(function(){t.addClass("btn-danger"),t.find(".fa.fa-trash, .fa.fa-trash-o").replaceWith(l)},0),$.ajax({type:"POST",url:t.parents("form").attr("action")+"?xhr&"+t.attr("id")+"=1&stripped=1",data:t.parents("form").serialize(),dataType:"text",success:function(e){if(Test.strContains(e,v___page_signin_form))return void(v___available_session=0);if($(e).find(".ui_form").length){var a=$(".table.table-striped.table-hover.table-condensed tbody tr"),l=$('.table.table-striped.table-hover.table-condensed tr td:first-child input[type="checkbox"]:checked').parents("tr"),n=(l.length,".table.table-striped.table-hover.table-condensed");"view_table.cgi"==v___location_file?$.each(a,function(){$(n).DataTable().row($(this)).remove()}).promise().done(function(){$(n).DataTable().rows.add($(e).find(n).find("tbody").find("tr")).draw(),$.each($(".table.table-striped.table-hover.table-condensed").find("tbody tr td"),function(e,t){proc_sql_table($(this))}),page_table_rows_control()}):$.each(l,function(){$(n).DataTable().row($(this)).remove().draw()});v___location_file;t.prop("disabled",!0),db_check_selected()}else theme_messenger('<i class="fa fa-fw fa-exclamation-triangle"></i>'+$(e).find(".panel-body h3").html(),10,"error");$("button").find(".cspinner_container").replaceWith('<i class="fa fa-fw fa-trash-o">&nbsp;&nbsp;</i>'),t.removeClass("btn-danger")},error:function(e){}})}})}),db_check_selected()})}}!v___available_navigation&&f__ex__mysql_runner();